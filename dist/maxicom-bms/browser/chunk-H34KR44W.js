import{a as S}from"./chunk-NGO4HX2H.js";import{a as H,b as k,c as L,e as T,f as z,g as j,h as q,i as R}from"./chunk-ALYBDDWS.js";import"./chunk-MFMQ7P6F.js";import{La as y,Na as c,Pa as O,Qa as F,Ta as x,Wa as E,Xa as I,Za as A,_a as N,ab as B,bb as G,db as V,gb as D,i as C,ka as M,la as h,m as _,qa as v,sa as b,ta as P}from"./chunk-7DJ2AMDO.js";import{Bb as l,Kb as e,Lb as n,Mb as u,Ub as d,bb as o,dc as i,fc as p,gb as f,nb as w,tb as g}from"./chunk-4XLDPXVN.js";import"./chunk-C6Q5SG76.js";function K(a,s){a&1&&(e(0,"mat-error"),i(1," Password must be at least 6 characters long "),n())}function Q(a,s){a&1&&(e(0,"mat-error"),i(1," Passwords do not match! "),n())}var U=a=>{let s=a.get("newPassword"),r=a.get("confirmPassword");return s&&r&&s.value!==r.value?{passwordMismatch:!0}:null},J=class a{constructor(s,r){this.fb=s;this.authService=r;this.passwordForm=this.fb.group({oldPassword:["",[c.required]],newPassword:["",[c.required,c.minLength(6)]],confirmPassword:["",[c.required]]},{validators:U})}passwordForm;isOldHidden=!0;isNewHidden=!0;isConfirmHidden=!0;isLoading=!1;onSubmit(){if(this.passwordForm.invalid||this.isLoading)return;this.isLoading=!0;let{oldPassword:s,newPassword:r}=this.passwordForm.value;this.authService.changePassword(s,r).subscribe(t=>{this.isLoading=!1,t&&(this.passwordForm.reset(),Object.keys(this.passwordForm.controls).forEach(m=>{this.passwordForm.get(m)?.setErrors(null)}),this.passwordForm.setErrors(null))})}static \u0275fac=function(r){return new(r||a)(f(A),f(S))};static \u0275cmp=w({type:a,selectors:[["app-account"]],decls:39,vars:11,consts:[[1,"page-container"],[1,"header-content"],[1,"page-title"],[1,"title-icon"],[1,"page-subtitle"],[1,"account-card","mat-elevation-z4"],[1,"account-form",3,"ngSubmit","formGroup"],["appearance","outline"],["matInput","","formControlName","oldPassword",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],["matInput","","formControlName","newPassword",3,"type"],[4,"ngIf"],["matInput","","formControlName","confirmPassword",3,"type"],["mat-flat-button","","color","primary","type","submit",1,"save-button",3,"disabled"]],template:function(r,t){if(r&1&&(e(0,"div",0)(1,"div",1)(2,"h1",2)(3,"mat-icon",3),i(4,"person"),n(),i(5," Account Settings "),n(),e(6,"p",4),i(7," Change Administrator Password "),n()(),e(8,"mat-card",5)(9,"mat-card-header")(10,"mat-card-title"),i(11,"Change password"),n()(),e(12,"mat-card-content")(13,"form",6),d("ngSubmit",function(){return t.onSubmit()}),e(14,"mat-form-field",7)(15,"mat-label"),i(16,"Old password"),n(),u(17,"input",8),e(18,"button",9),d("click",function(){return t.isOldHidden=!t.isOldHidden}),e(19,"mat-icon"),i(20),n()()(),e(21,"mat-form-field",7)(22,"mat-label"),i(23,"New password"),n(),u(24,"input",10),e(25,"button",9),d("click",function(){return t.isNewHidden=!t.isNewHidden}),e(26,"mat-icon"),i(27),n()(),g(28,K,2,0,"mat-error",11),n(),e(29,"mat-form-field",7)(30,"mat-label"),i(31,"Confirm new password"),n(),u(32,"input",12),e(33,"button",9),d("click",function(){return t.isConfirmHidden=!t.isConfirmHidden}),e(34,"mat-icon"),i(35),n()(),g(36,Q,2,0,"mat-error",11),n(),e(37,"button",13),i(38),n()()()()()),r&2){let m;o(13),l("formGroup",t.passwordForm),o(4),l("type",t.isOldHidden?"password":"text"),o(3),p(" ",t.isOldHidden?"visibility_off":"visibility"," "),o(4),l("type",t.isNewHidden?"password":"text"),o(3),p(" ",t.isNewHidden?"visibility_off":"visibility"," "),o(),l("ngIf",(m=t.passwordForm.get("newPassword"))==null||m.errors==null?null:m.errors.minlength),o(4),l("type",t.isConfirmHidden?"password":"text"),o(3),p(" ",t.isConfirmHidden?"visibility_off":"visibility"," "),o(),l("ngIf",t.passwordForm.errors==null?null:t.passwordForm.errors.passwordMismatch),o(),l("disabled",t.passwordForm.invalid||t.isLoading),o(),p(" ",t.isLoading?"Saving...":"Save Changes"," ")}},dependencies:[_,C,N,x,y,O,F,E,I,z,H,L,T,k,j,D,B,G,V,R,q,P,b,v,h,M],styles:[".header-content[_ngcontent-%COMP%]{padding-bottom:12px}.header-content[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{margin:0 0 8px;display:flex;align-items:center;gap:12px;color:var(--primary-color);font-size:1.8rem;font-weight:500}.header-content[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]   .title-icon[_ngcontent-%COMP%]{font-size:2rem;color:var(--accent-color)}.header-content[_ngcontent-%COMP%]   .page-subtitle[_ngcontent-%COMP%]{margin:0;color:#666;font-size:1rem;line-height:1.5}.page-container[_ngcontent-%COMP%]{padding:24px}.page-header[_ngcontent-%COMP%]{margin-bottom:24px}.page-header[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{margin:0 0 8px;display:flex;align-items:center;gap:12px;font-size:1.8rem;font-weight:500}.page-header[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]   .title-icon[_ngcontent-%COMP%]{font-size:2rem}.page-header[_ngcontent-%COMP%]   .page-subtitle[_ngcontent-%COMP%]{margin:0;color:#666}.account-card[_ngcontent-%COMP%]{max-width:600px;border-radius:16px}.account-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;padding-top:16px}mat-form-field[_ngcontent-%COMP%]{width:100%}.save-button[_ngcontent-%COMP%]{align-self:flex-start}"]})};export{J as AccountComponent,U as passwordMatchValidator};
